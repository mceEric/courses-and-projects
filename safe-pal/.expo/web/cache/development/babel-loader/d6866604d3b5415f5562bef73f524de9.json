{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport { auth, realtimeDatabase } from \"../firebase\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Input } from 'react-native-elements';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function SettingScreen() {\n  var navigation = useNavigation();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      friendName = _useState2[0],\n      setFriendName = _useState2[1];\n\n  function handleSignOut() {\n    auth.signOut().then(function () {\n      navigation.replace(\"Login\");\n    }).catch(function (error) {\n      return alert(error.message);\n    });\n  }\n\n  var addFriend = function addFriend() {\n    var friendNode = realtimeDatabase.ref(\"users\");\n    friendNode.once('value', function (snapshot) {\n      if (snapshot.hasChild(friendName) && friendName !== auth.currentUser.displayName) {\n        friendNode.child(friendName).child(\"friendRequests\").child(\"received\").once('value', function (snapshot) {\n          if (!snapshot.hasChild(auth.currentUser.displayName)) {\n            friendNode.child(friendName).child(\"friendRequests\").child(\"received\").child(auth.currentUser.displayName).set({\n              accepted: false,\n              friendId: auth.currentUser.uid\n            });\n          }\n        });\n      }\n    });\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Input, {\n      placeholder: \"Type username!\",\n      label: \"Friend\",\n      leftIcon: {\n        type: 'material',\n        name: 'group-add'\n      },\n      value: friendName,\n      onChangeText: function onChangeText(text) {\n        return setFriendName(text);\n      }\n    }), _jsx(TouchableOpacity, {\n      title: \"Add\",\n      onPress: addFriend,\n      style: styles.button,\n      children: _jsx(Text, {\n        style: styles.texts,\n        children: \"Add Friend\"\n      })\n    }), _jsx(TouchableOpacity, {\n      title: \"SignOut\",\n      onPress: handleSignOut,\n      style: styles.button,\n      children: _jsx(Text, {\n        style: styles.texts,\n        children: \"Sign Out\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  texts: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: 'black',\n    fontSize: 20\n  },\n  Logo: {\n    width: 200,\n    height: 200\n  },\n  button: {\n    backgroundColor: '#daa520',\n    height: 50,\n    width: 200,\n    marginTop: 10,\n    borderRadius: 15,\n    borderWidth: 5,\n    justifyContent: \"center\",\n    alignItems: 'center'\n  },\n  friend: {\n    marginTop: 22,\n    padding: 25,\n    backgroundColor: 'blue',\n    fontSize: 22\n  },\n  container: {\n    flex: 1,\n    padding: 10,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  acceptButton: {\n    backgroundColor: 'red'\n  }\n});","map":{"version":3,"sources":["C:/projectpog/2022-ca326-travel-guide/MapDisplay/screens/SettingScreen.js"],"names":["React","useState","auth","realtimeDatabase","useNavigation","Input","SettingScreen","navigation","friendName","setFriendName","handleSignOut","signOut","then","replace","catch","error","alert","message","addFriend","friendNode","ref","once","snapshot","hasChild","currentUser","displayName","child","set","accepted","friendId","uid","styles","container","type","name","text","button","texts","StyleSheet","create","justifyContent","alignItems","color","fontSize","Logo","width","height","backgroundColor","marginTop","borderRadius","borderWidth","friend","padding","flex","acceptButton"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport {auth, realtimeDatabase} from \"../firebase\";\r\nimport {StyleSheet, Text, View, TouchableOpacity} from 'react-native'\r\nimport {useNavigation} from \"@react-navigation/native\";\r\nimport{Input} from 'react-native-elements'\r\n\r\n//Functional component to handle numerous procedures related to settings\r\nexport function SettingScreen() {\r\n    //Declaring necessary states\r\n    const navigation = useNavigation();\r\n    const [friendName, setFriendName] = useState(\"\")\r\n\r\n    //This function will handle the sign out of a logged in user\r\n    function handleSignOut() {\r\n        auth\r\n            .signOut()\r\n            .then(() => {\r\n                navigation.replace(\"Login\")\r\n            })\r\n            .catch(error => alert(error.message))\r\n    }\r\n\r\n    //This function sends a friend request to another user\r\n    const addFriend = () => {\r\n        const friendNode = realtimeDatabase.ref(\"users\");\r\n        friendNode.once('value', function(snapshot) {\r\n            //This if statement checks if the inputed user name exists within the database and that the inputed user name is not the current users name\r\n            if (snapshot.hasChild(friendName) && friendName !== auth.currentUser.displayName) {\r\n                friendNode.child(friendName).child(\"friendRequests\").child(\"received\").once('value', function(snapshot) {\r\n                    //Checks if user that wants to added doesnt already have a request from the current user\r\n                    if (!snapshot.hasChild(auth.currentUser.displayName)) {\r\n                        friendNode.child(friendName).child(\"friendRequests\").child(\"received\").child(auth.currentUser.displayName).set({accepted: false, friendId: auth.currentUser.uid})\r\n                    }\r\n        \r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Input\r\n                placeholder=\"Type username!\"\r\n                label=\"Friend\"\r\n                leftIcon={{type: 'material', name: 'group-add'}}\r\n                value={friendName}\r\n                onChangeText={text => setFriendName(text)}\r\n            />\r\n            <TouchableOpacity title =\"Add\" onPress={addFriend} style={styles.button}><Text style={styles.texts}>Add Friend</Text></TouchableOpacity>\r\n            <TouchableOpacity title =\"SignOut\" onPress={handleSignOut} style={styles.button}><Text style={styles.texts}>Sign Out</Text></TouchableOpacity>\r\n        </View>\r\n\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create\r\n({\r\n        texts: {\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            color: 'black',\r\n            fontSize: 20\r\n        },\r\n        Logo: {\r\n            width: 200,\r\n            height: 200,\r\n        },\r\n        button: {\r\n            backgroundColor: '#daa520',\r\n            height: 50,\r\n            width: 200,\r\n            marginTop: 10,\r\n            borderRadius: 15,\r\n            borderWidth: 5,\r\n            justifyContent: \"center\",\r\n            alignItems: 'center'\r\n\r\n        },\r\n        friend: {\r\n            marginTop: 22,\r\n            padding: 25,\r\n            backgroundColor: 'blue',\r\n            fontSize: 22,\r\n        },\r\n\r\n        container: {\r\n            flex: 1,\r\n            padding: 10,\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        },\r\n\r\n        acceptButton: {\r\n            backgroundColor: 'red',\r\n        }\r\n    \r\n\r\n\r\n    }\r\n)"]},"metadata":{},"sourceType":"module"}